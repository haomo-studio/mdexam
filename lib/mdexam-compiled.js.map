{"version":3,"sources":["mdexam.js"],"names":[],"mappings":"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","file":"mdexam-compiled.js","sourcesContent":[";(function(window, undefined) {\n\n  /** Detect free variable `exports` */\n  var freeExports = typeof exports == 'object' && exports;\n\n  /** Detect free variable `module` */\n  var freeModule = typeof module == 'object' && module && module.exports == freeExports && module;\n\n  /** Detect free variable `global` and use it as `window` */\n  var freeGlobal = typeof global == 'object' && global;\n  if (freeGlobal.global === freeGlobal) {\n    window = freeGlobal;\n  }\n\n  function mdexam(value) {\n    // exit early if already wrapped, even if wrapped by a different `mdexam` constructor\n    if (value && typeof value == 'object' && value.__wrapped__) {\n      return value;\n    }\n    // allow invoking `mdexam` without the `new` operator\n    if (!(this instanceof mdexam)) {\n      return new mdexam(value);\n    }\n    this.__wrapped__ = value;\n  }\n\n  var _ = require('lodash');\n\n  // Define regular expressions to parse markdown\n  var regexQ = /##\\s?\\[(.*题)\\]\\s?(\\S+)/;\n  var regexQSection = /####/g;\n  var regexTag = /\\[标签\\]/;\n  var regexChoice = /\\[选项\\]/;\n  var regexAnswer = /\\[答案\\]/;\n  var regexOptions = /\\*\\s{0,}(\\S+)/g;\n  var regexChecker = /\\[验证\\]/;\n  var regexAnswerRegex = /\\*\\s\\[answer-regex\\]\\s{0,}(\\S+)/g;\n  var regexOutputRegex = /\\*\\s\\[output-regex\\]\\s{0,}(\\S+)/g;\n\n  // md存储markdown的文本内容\n  mdexam.md = null;\n  // json存储json的内容\n  mdexam.json = {};\n\n  /**\n   * 将markdown格式的选择题转为JSON\n   * @param mdQ\n   */\n  mdexam.prototype.convertMultiplChoice2J = function(mdQ){\n    var qj = {\n      type: 'multiple-choice',\n      question: mdQ.match(regexQ)[2],\n      tags: [],\n      options: [],\n      answers: []\n    };\n\n    var sections = mdQ.split(regexQSection);\n\n    _.each(sections, function(section, index){\n      if(index === 0){\n        return 0;\n      }\n\n      if(regexTag.test(section)){\n        qj.tags = _.map(section.match(regexOptions), function(tag){\n          return tag.replace(/^\\*\\s{0,}/, '');\n        });\n      }\n\n      if(regexChoice.test(section)){\n        qj.options = _.map(section.match(regexOptions), function(option){\n          return option.replace(/^\\*\\s{0,}/, '');\n        });\n      }\n\n      if(regexAnswer.test(section)){\n        qj.answers = _.map(section.match(regexOptions), function(answer){\n          return answer.replace(/^\\*\\s{0,}/, '');\n        });\n      }\n    });\n\n    return qj;\n  };\n\n  /**\n   * 将markdown格式的填空题转为JSON\n   * @param mdQ\n   */\n  mdexam.prototype.convertFillIn2J = function(mdQ){\n    var qj = {\n      type: 'fill-in',\n      question: mdQ.match(regexQ)[2],\n      answer: null,\n      tags: [],\n      checker: []\n    };\n\n    var sections = mdQ.split(regexQSection);\n\n    _.each(sections, function(section, index){\n      if(index === 0){\n        return 0;\n      }\n\n      if(regexAnswer.test(section)){\n        qj.answer = _.map(section.match(regexOptions), function(tag){\n          return tag.replace(/^\\*\\s{0,}/, '');\n        })[0];\n      }\n\n      if(regexTag.test(section)){\n        qj.tags = _.map(section.match(regexOptions), function(tag){\n          return tag.replace(/^\\*\\s{0,}/, '');\n        });\n      }\n\n      if(regexChecker.test(section)){\n        qj.checker = _.map(section.match(regexAnswerRegex), function(regex){\n          return {\n            'answer-regex': regex.replace(/\\*\\s{0,}\\[answer-regex\\]\\s{0,}/, '')\n          }\n        });\n      }\n    });\n\n    return qj;\n  };\n\n  /**\n   * Convert command markdown question to JSON\n   * @param mdQ\n   */\n  mdexam.prototype.convertCmd2J = function(mdQ){\n    var qj = {\n      type: 'cmd-fill-in',\n      question: mdQ.match(regexQ)[2],\n      answer: null,\n      tags: [],\n      checker: []\n    };\n\n    var sections = mdQ.split(regexQSection);\n\n    _.each(sections, function(section, index){\n      if(index === 0){\n        return 0;\n      }\n\n      if(regexAnswer.test(section)){\n        qj.answer = _.map(section.match(regexOptions), function(option){\n          return option.replace(/^\\*\\s{0,}/, '');\n        })[0];\n      }\n\n      if(regexTag.test(section)){\n        qj.tags = _.map(section.match(regexOptions), function(tag){\n          return tag.replace(/^\\*\\s{0,}/, '');\n        });\n      }\n\n      if(regexChecker.test(section)){\n        qj.checker = qj.checker.concat(_.map(section.match(regexAnswerRegex), function(regex){\n          return {\n            'answer-regex': regex.replace(/\\*\\s{0,}\\[answer-regex\\]\\s{0,}/, '')\n          }\n        }), _.map(section.match(regexOutputRegex), function(regex){\n          return {\n            'output-regex': regex.replace(/\\*\\s{0,}\\[output-regex\\]\\s{0,}/, '')\n          }\n        }));\n      }\n    });\n\n    return qj;\n  };\n\n  /**\n   * @TODO Convert code fragment markdown question to JSON\n   * @param mdQ\n   */\n  mdexam.prototype.convertCodeFragment2J = function(mdQ){\n    return null;\n  };\n\n  /**\n   * @TODO Convert on-line IDE fragment markdown question to JSON\n   * @param mdQ\n   */\n  mdexam.prototype.convertProject2J = function(mdQ){\n    return null;\n  };\n\n  mdexam.prototype._convert = function(mdQ){\n    return null;\n  };\n\n  /**\n   * 根据markdown的内容，判断用什么转换函数转换为题目的json格式。\n   * @param mdQ\n   * @returns {*}\n   */\n  mdexam.prototype.getConvertFunc = function(mdQ){\n    var self = this;\n\n    if(!regexQ.test(mdQ)){\n      console.warn(\"Malformed markdown question: \", mdQ);\n      return null;\n    }\n\n    switch(mdQ.match(regexQ)[1]){\n      case '选择题':\n        return self.convertMultiplChoice2J;\n      case '填空题':\n        return self.convertFillIn2J;\n      case '命令题':\n        return self.convertCmd2J;\n      case '代码片段题':\n        return self.convertCodeFragment2J;\n      case '项目工程题':\n        return self.convertProject2J;\n      default:\n        console.warn('Unknown question type: ', mdQ);\n        return self._convert;\n    }\n  };\n\n  /**\n   * Convert a single markdown question to json\n   * @param mdQ - Single question markdown\n   */\n  mdexam.prototype.convertMdQ2J = function(mdQ){\n    return this.getConvertFunc(mdQ)(mdQ);\n  };\n\n  /**\n   * Distill a list of questions(in markdown) from origin markdown\n   * @param mdString -\n   * @return Array - a list of markdown which is a single question.\n   */\n  mdexam.prototype.distillQs = function(mdString){\n    var regexQ = /##\\s?\\[(.*题)\\]\\s?(\\S+)/g;\n    var qs = mdString.match(regexQ);\n    return _.map(qs, function(q, index){\n      var start = mdString.indexOf(qs[index]);\n      var end = (index + 1) === qs.length ? (mdString.length - 1) : mdString.indexOf(qs[index + 1]);\n      return mdString.slice(start, end);\n    });\n  };\n\n  /**\n   * 将markdown转为json\n   * @param mdString - markdown文档\n   * @return json expression of\n   */\n  mdexam.prototype.m2j = function(mdString){\n    var self = this;\n\n    // 挨个题目提取json\n    mdexam.json.questions = _.chain(self.distillQs(mdString))\n      .filter(function(mdq){\n        return self.convertMdQ2J(mdq) !== null;\n      })\n      .map(function(mdq){\n        return self.convertMdQ2J(mdq);\n      }).value();\n\n    // 提取外围信息\n    var extraRegexes = {\n      title: /^#\\s{0,}(\\S+)/g,\n      author: /####\\s{0,}\\[作者\\]\\s{0,}(\\S+)/g,\n      email: /####\\s{0,}\\[邮箱\\]\\s{0,}(\\S+)/g,\n      version: /####\\s{0,}\\[版本\\]\\s{0,}(\\S+)/g,\n      tags: /####\\s{0,}\\[标签\\]\\s{0,}([^#]+)/gm\n    };\n    _.each(extraRegexes, function(reg, k){\n      if(k === 'tags'){\n        var tagsSection = reg.test(mdString) ? mdString.match(reg)[0] : \"\";\n        mdexam.json[k] = _.map(tagsSection.match(regexOptions), function(tag){\n          return tag.replace(/^\\*\\s{0,}/, '');\n        });\n        return 0;\n      }\n\n      mdexam.json[k] = reg.test(mdString) ?\n        mdString.match(reg)[0].replace(/^####\\s{0,}\\[[^\\]]+\\]\\s{0,}/g, '').replace(/^#\\s{0,}/g, '') : null;\n    });\n\n    return mdexam.json;\n  };\n\n  /**\n   * @TODO 将json转为markdown\n   */\n  mdexam.prototype.j2m = function (jsonObj) {\n\n  };\n\n  /**\n   * @TODO 渲染JSON到模板\n   */\n  mdexam.prototype.render = function(){\n\n  };\n\n  // expose MdExam\n  // some AMD build optimizers, like r.js, check for specific condition patterns like the following:\n  if (typeof define == 'function' && typeof define.amd == 'object' && define.amd) {\n    // Expose MdExam to the global object even when an AMD loader is present in\n    // case MdExam was injected by a third-party script and not intended to be\n    // loaded as a module. The global assignment can be reverted in the MdExam\n    // module via its `noConflict()` method.\n    window._ = mdexam;\n\n    // define as an anonymous module so, through path mapping, it can be\n    // referenced as the \"underscore\" module\n    define(function() {\n      return mdexam;\n    });\n  }\n  // check for `exports` after `define` in case a build optimizer adds an `exports` object\n  else if (freeExports) {\n    // in Node.js or RingoJS v0.8.0+\n    if (freeModule) {\n      (freeModule.exports = mdexam)._ = mdexam;\n    }\n    // in Narwhal or RingoJS v0.7.0-\n    else {\n      freeExports._ = mdexam;\n    }\n  }\n  else {\n    // in a browser or Rhino\n    window._ = mdexam;\n  }\n}(this));"]}