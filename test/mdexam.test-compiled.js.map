{"version":3,"sources":["mdexam.test.js"],"names":[],"mappings":"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","file":"mdexam.test-compiled.js","sourcesContent":["/**\n * Created by haomo on 17/2/11.\n */\n\"use strict\";\nconst fs = require('fs');\nconst path = require('path');\nconst mdexam = require('../lib/mdexam');\n\n//获取测试试卷\nconst testPaper= require('./oPaper.json');\n// require(./testPaper.json);\nconst originPaper= require('./tPaper.json');\n\n\nlet md = mdexam();\n\ntest('测试将选择题转换成JSON', () => {\n  var mdq = \"\\\n## [选择题] 题目内容\\\n\\n\\\n#### [标签]\\\n  * 标签1\\\n  * 标签2\\\n\\n\\\n#### [选项] \\\n  * 选项1\\\n  * 选项2\\\n  * 选项3\\\n\\n\\\n#### [答案]\\\n  * 选项1\\\n  * 选项2\";\n\n  var qj = md.convertMdQ2J(mdq);\n  // console.log(qj);\n\n  expect(qj.type).toBe('multiple-choice');\n  expect(qj.question).toBe('题目内容');\n  expect(qj.tags.indexOf('标签1')).toBeGreaterThanOrEqual(0);\n  expect(qj.tags.indexOf('标签2')).toBeGreaterThanOrEqual(0);\n\n  expect(qj.options.indexOf('选项1')).toBeGreaterThanOrEqual(0);\n  expect(qj.options.indexOf('选项2')).toBeGreaterThanOrEqual(0);\n  expect(qj.options.indexOf('选项3')).toBeGreaterThanOrEqual(0);\n\n  expect(qj.answer.indexOf('选项1')).toBeGreaterThanOrEqual(0);\n  expect(qj.answer.indexOf('选项2')).toBeGreaterThanOrEqual(0);\n});\n\ntest('测试将填空题转换成JSON', () => {\n  var mdq = \"## [填空题] 题目内容\\n\\\n#### [标签]\\n\\\n  * 标签11\\n\\\n  * 标签12\\n\\\n\\n\\\n#### [答案]\\n\\\n* 正确答案或者用户的回答\\n\\\n\\\n#### [验证]\\n\\\n  * [answer-regex] /\\\\*\\\\s\\\\[answer-regex\\\\]\\\\s{0,}(\\\\S+)/g\";\n\n  var qj = md.convertFillIn2J(mdq);\n\n  expect(qj.type).toBe(\"fill-in\");\n  expect(qj.question).toBe('题目内容');\n  expect(qj.answer).toBe('正确答案或者用户的回答');\n  expect(qj.tags.indexOf('标签11')).toBeGreaterThanOrEqual(0);\n  expect(qj.tags.indexOf('标签12')).toBeGreaterThanOrEqual(0);\n\n  expect(qj.checker.length).toBe(1);\n  expect(qj.checker[0]['answer-regex']).toBe('/\\\\*\\\\s\\\\[answer-regex\\\\]\\\\s{0,}(\\\\S+)/g');\n});\n\ntest('测试将命令题转换成JSON', () => {\n  var mdq = \"## [命令题] 题目内容\\n\\\n#### [标签]\\n\\\n  * 标签11\\n\\\n  * 标签12\\n\\\n\\n\\\n#### [答案]\\n\\\n* 正确答案或者用户的回答\\n\\\n\\\n#### [验证]\\n\\\n  * [answer-regex] /\\\\*\\\\s\\\\[answer-regex\\\\]\\\\s{0,}(\\\\S+)/g\\n\\\n  * [output-regex] /\\\\*\\\\s\\\\[output-regex\\\\]\\\\s{0,}(\\\\S+)/g\";\n\n  var qj = md.convertCmd2J(mdq);\n\n  expect(qj.type).toBe(\"cmd-fill-in\");\n  expect(qj.question).toBe('题目内容');\n  expect(qj.answer).toBe('正确答案或者用户的回答');\n  expect(qj.tags.indexOf('标签11')).toBeGreaterThanOrEqual(0);\n  expect(qj.tags.indexOf('标签12')).toBeGreaterThanOrEqual(0);\n\n  expect(qj.checker.length).toBe(2);\n  expect(qj.checker[0]['answer-regex']).toBe('/\\\\*\\\\s\\\\[answer-regex\\\\]\\\\s{0,}(\\\\S+)/g');\n  expect(qj.checker[1]['output-regex']).toBe('/\\\\*\\\\s\\\\[output-regex\\\\]\\\\s{0,}(\\\\S+)/g');\n});\n\ntest('测试解析整个markdown文件', () => {\n  var markdown = fs.readFileSync(__dirname + '/exam.md', {flag: 'r+', encoding: 'utf8'});\n\n  var qj = md.m2j(markdown);\n  console.log(qj);\n\n  expect(qj.title).toBe('试题名称');\n  expect(qj.author).toBe('胡小根');\n  expect(qj.email).toBe('hxg@haomo-studio.com');\n  expect(qj.version).toBe('v1.0.0');\n  expect(qj.tags.indexOf('标签1')).toBeGreaterThanOrEqual(0);\n  expect(qj.tags.indexOf('标签2')).toBeGreaterThanOrEqual(0);\n  expect(qj.tags.indexOf('标签3')).toBeGreaterThanOrEqual(0);\n});\n\ntest('测试自动评价选择题', () => {\n  var originQj = {\n    \"type\": \"multiple-choice\",\n    \"question\": \"题目内容\",\n    \"tags\": [\n      \"标签11\",\n      \"标签12\"\n    ],\n    \"options\": [\n      \"A\",\n      \"B\",\n      \"C\"\n    ],\n    \"answer\": [\n      \"A\",\n      \"B\"\n    ]\n  };\n\n  var testQj1 = {\n    \"type\": \"multiple-choice\",\n    \"question\": \"题目内容\",\n    \"tags\": [\n      \"标签11\",\n      \"标签12\"\n    ],\n    \"options\": [\n      \"A\",\n      \"B\",\n      \"C\"\n    ],\n    \"answer\": [\n      \"A\",\n      \"B\"\n    ]\n  };\n\n  var testQj2 = {\n    \"type\": \"multiple-choice\",\n    \"question\": \"题目内容\",\n    \"tags\": [\n      \"标签11\",\n      \"标签12\"\n    ],\n    \"options\": [\n      \"A\",\n      \"B\",\n      \"C\"\n    ],\n    \"answer\": [\n      \"A\"\n    ]\n  };\n\n  var testQj3 = {\n    \"type\": \"multiple-choice\",\n    \"question\": \"题目内容\",\n    \"tags\": [\n      \"标签11\",\n      \"标签12\"\n    ],\n    \"options\": [\n      \"A\",\n      \"B\",\n      \"C\"\n    ],\n    \"answer\": [\n      \"A\",\n      \"C\"\n    ]\n  };\n\n  expect(md.checkChoice(originQj, testQj1)).toBe(true);\n  expect(md.checkChoice(originQj, testQj2)).toBe(false);\n  expect(md.checkChoice(originQj, testQj3)).toBe(false);\n});\n\ntest('测试自动评价填空题', () => {\n  var originQj = {\n    \"type\": \"fill-in\",\n    \"question\": \"1 + 1 = ?\",\n    \"answer\": \"2\",\n    \"tags\": [\n      \"标签11\",\n      \"标签12\"\n    ],\n    \"checker\": [\n      {\n        \"answer-regex\": \"/^2$/\"\n      }\n    ]\n  };\n\n  var testQj1 = {\n    \"type\": \"fill-in\",\n    \"question\": \"题目内容\",\n    \"answer\": \"2\",\n    \"tags\": [\n      \"标签11\",\n      \"标签12\"\n    ]\n  };\n\n  var testQj2 = {\n    \"type\": \"fill-in\",\n    \"question\": \"题目内容\",\n    \"answer\": \"3\",\n    \"tags\": [\n      \"标签11\",\n      \"标签12\"\n    ]\n  };\n\n  expect(md.checkFillIn(originQj, testQj1)).toBe(true);\n  expect(md.checkFillIn(originQj, testQj2)).toBe(false);\n});\n\ntest('测试自动评价命令题', () => {\n  var originQj = {\n    \"type\": \"cmd-fill-in\",\n    \"question\": \"请用一行命令杀死所有包含进程中包含字符串node的命令\",\n    \"answer\": \"kill -9 `ps -ef|grep node|awk '{print $2}'`\",\n    \"tags\": [\n      \"标签11\",\n      \"标签12\"\n    ],\n    \"checker\": [\n      {\n        \"answer-regex\": \"/grep/\"\n      },\n      {\n        \"output-regex\": \"/abc/g\"\n      }\n    ]\n  };\n\n  var testQj1 = {\n    \"type\": \"cmd-fill-in\",\n    \"question\": \"请用一行命令杀死所有包含进程中包含字符串node的命令\",\n    \"answer\": \"kill -9 `ps -ef|grep node|awk '{print $2}'`\",\n    \"tags\": [\n      \"标签11\",\n      \"标签12\"\n    ]\n  };\n\n  var testQj2 = {\n    \"type\": \"cmd-fill-in\",\n    \"question\": \"请用一行命令杀死所有包含进程中包含字符串node的命令\",\n    \"answer\": \"kill -9 `ps -ef|awk '{print $2}'`\",\n    \"tags\": [\n      \"标签11\",\n      \"标签12\"\n    ]\n  };\n\n  var testQj3 = {\n    \"type\": \"cmd-fill-in\",\n    \"question\": \"请用一行命令杀死所有包含进程中包含字符串node的命令\",\n    \"answer\": \"我不知道\",\n    \"tags\": [\n      \"标签11\",\n      \"标签12\"\n    ]\n  };\n\n  expect(md.checkCmdFillIn(originQj, testQj1)).toBe(true);\n  expect(md.checkCmdFillIn(originQj, testQj2)).toBe(false);\n  expect(md.checkCmdFillIn(originQj, testQj3)).toBe(false);\n});\n\ntest('测试试卷', () => {\n  expect(md.jsonCheck(originPaper,testPaper)).toBe(true);\n});"]}